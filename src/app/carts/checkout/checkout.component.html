<div class="container">
  <h1 class="fw-bold pb-2">Check Out</h1>

  <div class="d-flex flex-column-reverse flex-lg-row align-items-start justify-content-between ">
    <div class="col-12 col-lg-5">
      <form #orderData="ngForm" (ngSubmit)="orderNow(orderData.value)">
        <!-- 2 column grid layout with text inputs for the first and last names -->
        <div class="row mb-3">
          <h5 class="pb-2">Personal Details</h5>
          <div class="col">
            <div class="form-outline">
            <input #fname="ngModel" type="text" id="form3Example1" class="form-control" placeholder="First Name" name="firstName"
              [(ngModel)]="data.firstName" required pattern="[a-zA-Z ]{3,}"/>
              <div [hidden]="fname.valid || fname.untouched" class="alert alert-danger" role="alert">
                <small *ngIf="fname.errors?.['required']">Name is required</small>
                <small *ngIf="fname.errors?.['pattern']">Name must be 3 letters at least</small>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="form-outline">
              <input #lname="ngModel" type="text" id="form3Example2" class="form-control" placeholder="Last Name" name="lastName" [(ngModel)]="data.lastName" required pattern="[a-zA-Z ]{3,}" />
              <div [hidden]="lname.valid || lname.untouched" class="alert alert-danger" role="alert">
                <small *ngIf="lname.errors?.['required']">Name is required</small>
                <small *ngIf="lname.errors?.['pattern']">Name must be 3 letters at least</small>
              </div>
            </div>
          </div>
        </div>
        <div class="row mb-4">
          <div class="col">
            <div class="form-outline">
              <input #email="ngModel" type="text" id="form3Example1" class="form-control" placeholder="Email" name="email" [(ngModel)]="data.email" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"/>
              <div [hidden]="email.valid || email.untouched" class="alert alert-danger" role="alert">
                <small *ngIf="email.errors?.['required']">Email is required</small>
                <small *ngIf="email.errors?.['pattern']">Email is not valid</small>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="form-outline">
              <input #phone="ngModel" type="text" id="form3Example2" class="form-control" placeholder="Phone Number" name="phone" [(ngModel)]="data.phone" required pattern="^\d{10}$"/>
              <div [hidden]="phone.valid || phone.untouched" class="alert alert-danger" role="alert">
                <small *ngIf="phone.errors?.['required']">Phone is required</small>
                <small *ngIf="phone.errors?.['pattern']">Phone is not valid</small>
              </div>
            </div>
          </div>
        </div>
        <div class="row mb-3">
          <h5 class="pb-2">Shipping Details</h5>
          <div class="col">
            <div class="form-outline">
              <input #counrty="ngModel" type="text" id="form3Example1" class="form-control" placeholder="Counrty/Region" name="country" [(ngModel)]="data.country" required/>
              <div [hidden]="counrty.valid || counrty.untouched" class="alert alert-danger" role="alert">
                <small *ngIf="counrty.errors?.['required']">Counrty is required</small>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="form-outline">
              <input #city="ngModel" type="text" id="form3Example2" class="form-control" placeholder="City" name="city" [(ngModel)]="data.city" required/>
              <div [hidden]="city.valid || city.untouched" class="alert alert-danger" role="alert">
                <small *ngIf="city.errors?.['required']">City is required</small>
              </div>
            </div>
          </div>
        </div>
        <div class="row mb-4">
          <div class="col">
            <div class="form-outline">
              <input #address="ngModel" type="text" id="form3Example1" class="form-control" placeholder="Address" name="address" [(ngModel)]="data.address" required/>
              <div [hidden]="address.valid || address.untouched" class="alert alert-danger" role="alert">
                <small *ngIf="address.errors?.['required']">Address is required</small>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="form-outline">
              <input type="text" id="form3Example2" class="form-control" placeholder="PostalCode" name="postalCode" [(ngModel)]="data.postalCode"/>
            </div>
          </div>
        </div>
        <div class="row mb-3">
          <h5 class="pb-2">Delivery Type</h5>
          <div class="col">
            <div class="form-check border rounded">
              <input class="form-check-input" type="radio" name="flexRadioDefault" name="deliveryType" id="expressDelivery" value="Express Delivery" [(ngModel)]="data.deliveryType">
              <label class="form-check-label" for="expressDelivery">
                Express Delivery<br>
                <span class="text-secondary">1-3 Days Delivery</span>
              </label>
            </div>
          </div>
          <div class="col">
            <div class="form-check border rounded">
              <input class="form-check-input" type="radio" name="deliveryType" id="cargoDelivery" value="Cargo Delivery" [(ngModel)]="data.deliveryType">
              <label class="form-check-label" for="cargoDelivery">
                Cargo Delivery <br>
                <span class="text-secondary">1-3 Days Delivery</span>
              </label>
            </div>
          </div>
        </div>

        <div class="row mb-3" #card>
          <h5 class="pb-2">Payment Method</h5>
          <div class="col">
          <div class="input-group">
            <label class="input-group-text" for=""><i class="bi bi-credit-card-2-front-fill"></i></label>
            <select  #payment="ngModel" class="form-select" aria-label="Filter select" name="paymentMethod" [(ngModel)]="data.paymentMethod" required>
              <option selected><i class="bi bi-credit-card-2-front-fill"></i>Pay With Card</option>
              <option value="1">Pay On Cash</option>
              <option value="2">InstaPay</option>
              <option value="3">Mezza Card</option>
            </select>
          </div>
          <div [hidden]="payment.valid || payment.untouched" class="alert alert-danger" role="alert">
            <small *ngIf="payment.errors?.['required']">paymentMethod is required</small>
          </div>
          </div>
        </div>
        <div class="row mb-4">
          <div class="col">
            <div class="form-outline">
              <input type="text" id="form3Example1" class="form-control" placeholder="Card Number" name="cardNumber"
                [(ngModel)]="data.cardNumber"/>
            </div>
          </div>
          <div class="col">
            <div class="form-outline">
              <input type="text" id="form3Example2" class="form-control" placeholder="CVV"  name="cvv"
                [(ngModel)]="data.cvv"/>
            </div>
          </div>
        </div>
        <div class="row mb-4">
          <div class="col">
            <div class="form-outline">
              <input type="text" id="form3Example1" class="form-control" placeholder="Card Holder`s Name"  name="cardholder"
                [(ngModel)]="data.cardholder"/>
            </div>
          </div>
          <div class="col">
            <div class="form-outline">
              <input type="text" id="form3Example2" class="form-control" placeholder="Expiry Date"  name="expiryDate"
                [(ngModel)]="data.expiryDate"/>
            </div>
          </div>
        </div>
        <!-- Submit button -->
        <button [disabled]="orderData.invalid" type="submit" class="btn btn-success btn-block mb-4 w-100 rounded-pill">Place Order</button>
        <!-- (click)="addCart()" -->
      </form>
    </div>
    <div class="align-self-start col-12 col-lg-6 pb-2">
      <h4>Cart</h4>
      <div class="border border-1 rounded w-100 p-3">
        <div *ngFor="let item of cartProducts; let index=index">
          <!-- Single item -->
          <div class="row align-items-center justify-content-between d-flex flex-md-row">
            <div class="mb-4 mb-lg-0 d-flex flex-column flex-lg-row align-items-center justify-content-between pb-2">
              <!-- Image -->
              <div class="border rounded around-image">
                <img src="{{item.image}}" class="image" alt="Product img" />
              </div>
              <!-- Image -->
              <div class="text-center text-lg-start pt-3 pt-lg-0 col-12 col-lg-8">
                <p class="text-truncate"><strong>{{item.title}}</strong></p>
                <p class="text-truncate">{{item.category}}</p>
                <strong>{{item.price}}$</strong><br>
                <!-- <strong>{{item.quantity}}</strong> -->
              </div>
              <!-- Quantity -->
              <div class="d-flex flex-column align-items-center ">
                <input id="form1" min="0" name="quantity" (keyup)="detectChange()" [(ngModel)]="item.quantity"
                  type="number" class="text-center form " />
                <strong class="mx-3">{{item.price * item.quantity}}$</strong>
              </div>
              <!-- Quantity -->

            </div>
            <hr class="pt-3" />
          </div>
        </div>
        <div class=" col-12 d-flex  align-items-center justify-content-between">
          <h3>Total</h3>
          <strong class="align-self-center">{{total}}$</strong>
        </div>
      </div>
    </div>
  </div>
  <div class="alert alert-success mt-3" role="alert" *ngIf="success">You Order Successfully Send</div>
</div>

